use rtgs_nets_mig;

DROP TABLE IF EXISTS FILE_UPLOAD_HEADER;
CREATE TABLE FILE_UPLOAD_HEADER 
(
  FILE_UPLOAD_ID INT NOT NULL,
  FILE_UPLOAD_CODE varchar(50) NOT NULL,
  IP_ADDRESS varchar(50) NOT NULL,
  FILE_PATH varchar(100) NOT NULL,
  FILE_NAME varchar(100) NOT NULL,
  DRAFT_TABLE_NAME varchar(100) NOT NULL,
  LIVE_TABLE_NAME varchar(100) NOT NULL,
  FILE_DELIMITER varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  FILE_HEADER INT DEFAULT NULL,
  IS_ACTIVE INT DEFAULT 1 NULL,
  PROCEDURE_NAME varchar(50) DEFAULT NULL,
  PRIMARY KEY (FILE_UPLOAD_CODE)
);
INSERT INTO FILE_UPLOAD_HEADER VALUES (1,'MEMBER_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','Member.txt','INT_MEMBER','MEMBER','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (2,'ACCOUNT_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','Account.txt','STR_ACCOUNT','ACCOUNT','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (3,'ACCOUNT_POSITION_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','Account.txt','STR_ACCOUNT','ACCOUNT','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (4,'SSS_MEMBER_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','Member.txt','STR_sss_member','sss_member','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (5,'SSS_ACCOUNT_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','SSS_Account.txt','STR_sss_account','sss_account','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (6,'SSS_ACCOUNT_SECURITY_POSITION_STATS_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','SSS_AccSPStats.txt','STR_sss_account_securites_position_stats','sss_account_securites_position_stats','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (7,'SSS_SECURITIES_CODE_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','SSS_SecCodes.txt','STR_sss_securities_code','sss_securities_code','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (8,'SSS_SECURITIES_CODE_STATISTICS_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','SSS_SecCodesStats.txt','STR_sss_securities_code_statistics','sss_securities_code_statistics','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (9,'SSS_COUPON_SCHEDULES_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','SSS_CoupCodes.txt','STR_sss_coupon_schedules','sss_coupon_schedules','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (10,'SSS_ALLOTMENT_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','SSS_Allotment.txt','STR_sss_allotment','sss_allotment','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (11,'SSS_SECURITIES_PRICE_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','SSS_SecPrices.txt','STR_sss_securities_price','sss_securities_price','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (12,'SSS_FLOATING-RATES_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','SSS_FloatRates.txt','STR_sss_floating_rates','sss_floating_rates','|',1,1,"");
INSERT INTO FILE_UPLOAD_HEADER VALUES (13,'SSS_TRANSACTION_FILE_UPLOAD','103.177.224.100','C:\Users\Public\scrips data','SSS_Trancation.txt','STR_sss_transaction','sss_transaction','|',1,1,"");

DROP TABLE IF EXISTS FILE_UPLOAD_DETAILS;
CREATE TABLE FILE_UPLOAD_DETAILS
(
  FILE_UPLOAD_ID INT NOT NULL,
  FILE_UPLOAD_CODE varchar(50) NOT NULL,
  SEQUENCE_NO int NOT NULL,
  FILE_HEADER_NAME varchar(50) NOT NULL,
  TABLE_FIELD_NAME varchar(50) NOT NULL,
  DATA_TYPE varchar(30) NOT NULL,
  DATA_SIZE int NOT NULL,
  IS_NOT_NULL int default 1 NOT NULL,
  DATE_FORMAT varchar(30),
  PK_TABLE varchar(30),
  PK_FIELD varchar(30),
  CONSTRAINT FK_FILE_UPLOAD_CODE FOREIGN KEY (FILE_UPLOAD_CODE) REFERENCES FILE_UPLOAD_HEADER (FILE_UPLOAD_CODE)
);
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',1,'ID','id','VARCHAR',36,1,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',2,'MEMBER_CODE','member_code','VARCHAR',8,1,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',3,'NAME','member_name','VARCHAR',100,1,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',4,'SHORT_NAME','member_short_name','VARCHAR',30,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',5,'TYPE','member_type','VARCHAR',3,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',6,'STATUS','member_status','VARCHAR',3,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',7,'ACTIVATION_DATE','activation_date','DATE',9,0,"YYYY-MM-DD","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',8,'SWIFT_MEMBER','swift_member','VARCHAR',36,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',9,'SWIFT_BIC','swift_bic','VARCHAR',8,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',10,'LOCATION_CODE','location_code','VARCHAR',3,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',11,'FI_GROUP','fi_group','VARCHAR',1,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',12,'FI_CODE','fi_code','VARCHAR',4,0,"YYYY-MM-DD","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',13,'SECTOR_ID','sector_id','VARCHAR',30,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',14,'CURRENCY_CODE_SUBSCRIPTION','currency_code_subscription','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',15,'TAX_RATE','tax_rate','VARCHAR',100,0,"YYYY-MM-DD","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',16,'FEE_PROFILE_ID','fee_profile_id','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',17,'MCB_ID','mcb_id','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',18,'INTRADAY_MCB_REQUIREMENT','intrday_mcb_requirement','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',19,'MINIMUM_MCB_REQUIREMENT','minimum_mcb_requirement','VARCHAR',100,0,"YYYY-MM-DD","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',20,'MAXIMUM_MCB_REQUIREMENT','maximum_mcb_requirement','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',21,'AVERAGE_MCB_REQUIREMENT','average_mcb_requirement','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',22,'UEN','uen','VARCHAR',10,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',23,'LEI','lei','VARCHAR',20,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',24,'EXEMPTED_FROM_BILLING','exempted_from_billing','INT',1,0,"YYYY-MM-DD","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',25,'EXEMPTED_FROM_SYSTEM_LIMIT','exempted_from_system_limit','INT',1,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',26,'CURRENCY_CODE','currency_code','VARCHAR',3,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',27,'CURRENCY_MEMBER_CODE','currency_member_code','VARCHAR',36,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (1,'MEMBER_FILE_UPLOAD',28,'CURRENCY_SETTLEMENT_AGENT','currency_settlement_agent','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',1,'account_number','account_number','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',2,'description','description','VARCHAR',35,1,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',3,'member_id','member_id','VARCHAR',36,1,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',4,'account_type','account_type','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',5,'main_account_indicator','main_account_indicator','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',6,'default_main_account','default_main_account','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',7,'statement_delivery_bic','statement_delivery_bic','VARCHAR',100,0,"YYYY-MM-DD","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',8,'account_status','account_status','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',9,'currency_code','currency_code','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',10,'minimum_balance','minimum_balance','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',11,'end_of_day_statement','end_of_day_statement','VARCHAR',36,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',12,'value_date','value_date','INT',9,0,"YYYY-MM-DD","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',13,'activation_date','activation_date','INT',9,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',14,'gl_category','gl_category','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',15,'cost_centre','cost_centre','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',16,'gl_account_number','gl_account_number','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',17,'statement_interval','statement_interval','VARCHAR',100,0,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',18,'transaction_id','transaction_id_asp','VARCHAR',36,1,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',19,'currency_code','currency_code_asp','VARCHAR',35,1,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',20,'account_id','account_id_asp','VARCHAR',36,1,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',21,'account_id','account_id_ana','VARCHAR',36,1,"","","");
INSERT INTO FILE_UPLOAD_DETAILS VALUES (2,'ACCOUNT_FILE_UPLOAD',22,'name_and_address','name_and_address_ana','VARCHAR',300,1,"","","");


DROP TABLE IF EXISTS FILE_UPLOAD_EXECUTION;
CREATE TABLE FILE_UPLOAD_EXECUTION
(
  FILE_UPLOAD_ID int NOT NULL,
  FILE_UPLOAD_CODE varchar(100) NOT NULL,
  EXEC_ID varchar(100) NOT NULL NOT NULL,
  START_TIME TIMESTAMP NOT NULL,
  END_TIME  datetime default NOW(),
  STATUS varchar(30) NOT NULL,
  PRIMARY KEY (EXEC_ID),
  CONSTRAINT FK_FILE_UPLOAD_CODE_FUEXC FOREIGN KEY (FILE_UPLOAD_CODE) REFERENCES FILE_UPLOAD_HEADER (FILE_UPLOAD_CODE)
);

DROP TABLE IF EXISTS ERROR_LOG_MASTER;
CREATE TABLE ERROR_LOG_MASTER
(
  ERROR_CODE INT(8) NOT NULL,
  ERROR_DESCRIPTION varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  REMARKS varchar(50), 
  PRIMARY KEY (ERROR_CODE)
);
INSERT INTO ERROR_LOG_MASTER VALUES (000,'Run time errors','Un Documented errors');
INSERT INTO ERROR_LOG_MASTER VALUES (100,'IO exceptions','Check file path and other FTP access');
INSERT INTO ERROR_LOG_MASTER VALUES (300,'SQL DB errors','errors caused at DB operations');
INSERT INTO ERROR_LOG_MASTER VALUES (400,'URL not found','Please retry with valid URL');
INSERT INTO ERROR_LOG_MASTER VALUES (404,'Authorization error','Check user profile sent in request');
INSERT INTO ERROR_LOG_MASTER VALUES (405,'BAD REQUEST','Check file upload code sent');
INSERT INTO ERROR_LOG_MASTER VALUES (500,'Internal server error','Please check in logs for failure');
INSERT INTO ERROR_LOG_MASTER VALUES (600,'Data Validation Failure','Values sent in data file is not in expected patter');
INSERT INTO ERROR_LOG_MASTER VALUES (601,'Field is empty','Check values sent');
INSERT INTO ERROR_LOG_MASTER VALUES (602,'Date format is not correct','');
INSERT INTO ERROR_LOG_MASTER VALUES (603,'Length exceeding','inserted value is more than max length');

drop table if exists FILE_UPLOAD_ERROR;
CREATE TABLE FILE_UPLOAD_ERROR
(
  FILE_UPLOAD_ID int NOT NULL,
  FILE_UPLOAD_CODE varchar(100) NOT NULL,
  EXEC_ID varchar(100) NOT NULL,
  ERROR_CODE int NOT NULL,
  PRIMARY KEY (EXEC_ID)
);