CREATE TABLE `issuer` (
  `id` varchar(36) NOT NULL COMMENT 'PRIMARY KEY UUID',
  `issuer_code` varchar(8) NOT NULL COMMENT 'Issuer Code',
  `issuer_name` varchar(100) NOT NULL COMMENT 'issuer name',
  `issuer_type` varchar(30) NOT NULL COMMENT 'issuer type',
  `lei` varchar(30) DEFAULT NULL COMMENT 'issuer''s legal entity identifier',
  `uen` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'issuer''s uen',
  `issuing_country` varchar(56) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'issuer''s issuing country (2 char ISO country code)',
  `country_of_incorporation` varchar(2) NOT NULL COMMENT 'issuer''s country of incorporation (2 char ISO country code)',
  `action` varchar(6) DEFAULT NULL COMMENT 'Action of last request',
  `status` varchar(30) NOT NULL COMMENT 'Record status',
  `modified_by` varchar(36) NOT NULL COMMENT 'Last modified User ID',
  `modified_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Last modified timestamp',
  `approved_by` varchar(36) NOT NULL COMMENT 'Last approved user ID',
  `approved_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Last approved timestamp',
  `effective_date` timestamp NULL DEFAULT NULL COMMENT 'Activation date of the record',
  `created_date` timestamp NOT NULL COMMENT 'Created date of the record',
  `approval_remark` varchar(140) DEFAULT NULL COMMENT 'Last approver remark',
  `workflow_status_id` int DEFAULT NULL COMMENT 'Approval flow ID',
  `gl_indicator` tinyint DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`),
  UNIQUE KEY `issuer_code` (`issuer_code`),
  KEY `fk_issuer_modified_by_idx` (`modified_by`),
  KEY `fk_issuer_approved_by_idx` (`approved_by`),
  CONSTRAINT `fk_issuer_approved_by` FOREIGN KEY (`approved_by`) REFERENCES `user` (`id`),
  CONSTRAINT `fk_issuer_modified_by` FOREIGN KEY (`modified_by`) REFERENCES `user` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='member_screen_issuer_This table is used to configure the issuer related details which is required for securities';


CREATE TABLE `securities_type` (
  `id` varchar(10) NOT NULL COMMENT 'PRIMARY KEY - securities Type id',
  `description` varchar(35) NOT NULL COMMENT 'Securities Type Description',
  `securities_category` varchar(21) NOT NULL COMMENT 'Securities Category',
  `issuer` varchar(36) DEFAULT NULL COMMENT 'issuer id, issuer of the securities',
  `ipa` varchar(36) DEFAULT NULL COMMENT 'List of Members with IPA=Yes.',
  `securities_tenor_period_unit` varchar(6) DEFAULT NULL COMMENT 'Tenor unit',
  `tradable` tinyint DEFAULT NULL COMMENT 'select whether the securities is  tradable',
  `denomination` bigint DEFAULT NULL COMMENT 'the denomination of the securities',
  `currency_code` varchar(3) DEFAULT NULL COMMENT 'the denominating currency code for the securitiestype',
  `coupon_structure` varchar(14) DEFAULT NULL COMMENT 'Type of coupon for the securities type',
  `coupon_payment_frequency` varchar(18) DEFAULT NULL COMMENT 'select the frequency at which coupon payment will be performed.',
  `day_count_convention` varchar(16) DEFAULT NULL COMMENT 'number of day per year. It is an indication for the computation of the coupon/interest payments.',
  `rounding_option` varchar(10) DEFAULT NULL COMMENT 'for setting the calculated values to either Round-up (if equal to and greater than 5), Round-down (if smaller than 5) or to the Nearest. It is use for the computation of the coupon/interest payments.',
  `record_date_period` int DEFAULT NULL COMMENT 'input the duration (in business days) prior to coupon payment, to be specified by the user in order to derive the Record Date',
  `facility_eligibility_id` varchar(10) DEFAULT NULL COMMENT 'Facility Eligibility ID - List of Facility Eligibility IDs set up in SSS',
  `haircut_id` varchar(35) DEFAULT NULL COMMENT 'Haircut ID - List of Haircut IDs set up in SSS',
  `tax_scheme_id` varchar(36) DEFAULT NULL COMMENT 'Tax scheme id',
  `voluntary_redemption_frequency` varchar(7) DEFAULT NULL COMMENT 'voluntary redemption frequency for Singapore Savings Bond redemption',
  `redemption_end_date_offset` int DEFAULT NULL COMMENT 'The redemption end date offset for corporate action early redemption event',
  `automatic_event_generation` tinyint NOT NULL COMMENT 'To allow the user to indicate the event will be generated automatically by system on issuance date or coupon payment date.',
  `reference_rate` varchar(10) DEFAULT NULL COMMENT 'Reference Rate',
  `frn_calculation_method` varchar(23) DEFAULT NULL COMMENT 'FRN Calculation method',
  `allow_negative_rate` tinyint NOT NULL COMMENT 'To allow the user to indicate whether negative rate is allowed',
  `coupon_rounding_precision` int DEFAULT NULL COMMENT 'Rounding precision for the user input',
  `backward_shifted_observation_period` int DEFAULT NULL COMMENT 'It’s the  backward shifted observation period in days',
  `action` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'Action of last request',
  `status` varchar(30) NOT NULL COMMENT 'Record status',
  `modified_by` varchar(36) NOT NULL COMMENT 'Last modified User ID',
  `modified_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Last modified timestamp',
  `approved_by` varchar(36) NOT NULL COMMENT 'Last approved user ID',
  `approved_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Last approved timestamp',
  `effective_date` timestamp NULL DEFAULT NULL COMMENT 'Activation date of the record',
  `created_date` timestamp NOT NULL COMMENT 'Created date of the record',
  `approval_remark` varchar(140) DEFAULT NULL COMMENT 'Last approver remark',
  `workflow_status_id` int DEFAULT NULL COMMENT 'Approval flow ID',
  `erf_eligible` tinyint NOT NULL COMMENT 'To allow user to indicate if the security type is eligible for Enhanced Repo Facility.',
  `redemption_reimbursement` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'redemption or reimbursement type of the securities. Possible values are fixed maturity and perpertual',
  `benchmark_indicator` varchar(14) NOT NULL COMMENT 'To allow the user to select the benchmark indicator.  It indicates whether the securities code is eligible to be benchmark',
  `primary_registry_id` varchar(36) NOT NULL,
  `settlement_cycle` int DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_securities_type_currency_param` (`currency_code`),
  KEY `fk_securities_type_issuer` (`issuer`),
  KEY `fk_securities_type_member` (`ipa`),
  KEY `fk_securities_type_facility_eligibility` (`facility_eligibility_id`),
  KEY `fk_securities_type_haircut` (`haircut_id`),
  KEY `fk_securities_type_scheme` (`tax_scheme_id`),
  KEY `fk_securities_type_modified_by_idx` (`modified_by`),
  KEY `fk_securities_type_approved_by_idx` (`approved_by`),
  CONSTRAINT `fk_securities_type_approved_by` FOREIGN KEY (`approved_by`) REFERENCES `user` (`id`),
  CONSTRAINT `fk_securities_type_currency_param` FOREIGN KEY (`currency_code`) REFERENCES `currency_param` (`currency_code`),
  CONSTRAINT `fk_securities_type_facility_eligibility` FOREIGN KEY (`facility_eligibility_id`) REFERENCES `facility_eligibility` (`id`),
  CONSTRAINT `fk_securities_type_haircut` FOREIGN KEY (`haircut_id`) REFERENCES `haircut` (`id`),
  CONSTRAINT `fk_securities_type_issuer` FOREIGN KEY (`issuer`) REFERENCES `issuer` (`id`),
  CONSTRAINT `fk_securities_type_member` FOREIGN KEY (`ipa`) REFERENCES `member` (`id`),
  CONSTRAINT `fk_securities_type_modified_by` FOREIGN KEY (`modified_by`) REFERENCES `user` (`id`),
  CONSTRAINT `fk_securities_type_scheme` FOREIGN KEY (`tax_scheme_id`) REFERENCES `tax_scheme` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='biz-param_screen_securities-type_This table is used to configure the securities type needed for securities code';


CREATE TABLE `member` (
  `id` varchar(36) NOT NULL COMMENT 'Internal UUID, Primary key, Member''s unique identification',
  `member_code` varchar(11) NOT NULL,
  `name` varchar(100) NOT NULL COMMENT 'member name',
  `short_name` varchar(30) NOT NULL COMMENT 'member’s short name',
  `member_type` varchar(3) NOT NULL COMMENT 'play the member type, shows the type belonging to the member. FOREIGN KEY - Id from member_type',
  `member_status` varchar(3) NOT NULL COMMENT 'member’s status. FOREIGN KEY - Id from member_status',
  `activation_date` date NOT NULL COMMENT 'To allow the user to set the activation date of the new member creation',
  `swift_bic` varchar(8) NOT NULL COMMENT '"member’s SWIFT\nBIC. SWIFT BIC used by a Participant at its alternate site."',
  `location` varchar(3) NOT NULL COMMENT '3-digit location code. Any transaction generated by the system will send to the location set in this field',
  `fi_code` varchar(4) NOT NULL COMMENT 'unique bank code',
  `trader_status` varchar(20) NOT NULL,
  `sector_id` varchar(30) NOT NULL COMMENT 'sector Id',
  `auto_debit_indicator` tinyint NOT NULL COMMENT 'To allow the user to select the auto debit indicator',
  `facility_eligibility_id` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'To allow the user to select the Faciliy Eligibility ID. Id from facility_eligibility table as FOREIGN KEY',
  `uen` varchar(10) DEFAULT NULL COMMENT 'UEN number',
  `lei` varchar(20) DEFAULT NULL COMMENT 'LEI number',
  `statement_delivery_bic` varchar(11) DEFAULT NULL COMMENT 'statement delivery BIC',
  `end_of_day_statement` varchar(36) NOT NULL COMMENT '"• SWIFT securities statement – Statement (semt.002, semt.017, semt.018) will be sent out to the Member\n• OSP securities statement – Statement will not be sent out to the member. Member will retrieve the statement in OSP\n• No statement – Statement will not be sent out. (default value for auto creation by system)\n"',
  `exempted_from_billing` tinyint NOT NULL COMMENT 'indication whether the member is exempted from the billing',
  `exempted_from_system_limit` tinyint NOT NULL COMMENT 'indication whether the member is exempted from system limit',
  `zero_holdings_statement` varchar(20) NOT NULL COMMENT '"option when the SSS statements will be generated\n• Daily: Statement will be generated for all working days even when there are no holdings in the custody accounts.\n• Monthly: Statement will be generated on the last working day of every month even when there are no holdings in the custody accounts. For the rest of the working days of each month, the statements of accounts would only be generated when there are holdings in the custody accounts. \n• No: Daily statement will not be generated when there are no holdings in the custody accounts.\nNote: MT535 will be generated for each custody account type."',
  `rtgs_account` varchar(34) NOT NULL COMMENT 'To allow the user to input RTGS Account For Settlement.',
  `tax_profile_id` varchar(36) DEFAULT NULL COMMENT 'Its tax profile for billing',
  `billing_profile_id` varchar(36) DEFAULT NULL COMMENT 'Its fee profile for billing',
  `action` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'Action of last request',
  `status` varchar(30) NOT NULL COMMENT 'Record status',
  `modified_by` varchar(36) NOT NULL COMMENT 'Last modified User ID',
  `modified_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Last modified timestamp',
  `approved_by` varchar(36) NOT NULL COMMENT 'Last approved user ID',
  `approved_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Last approved timestamp',
  `created_date` timestamp NOT NULL COMMENT 'Created date of the record',
  `effective_date` timestamp NULL DEFAULT NULL COMMENT 'Activation date of the record',
  `workflow_status_id` int DEFAULT NULL COMMENT 'Approval flow ID',
  `approval_remark` varchar(140) DEFAULT NULL COMMENT 'Last approver remark',
  `fall_back_account` varchar(36) DEFAULT NULL COMMENT 'To allow the user to select a fall back account of the member.',
  `issuing_paying_agent` varchar(36) DEFAULT NULL COMMENT 'indicate whether member is a primary dealer.',
  `primary_dealer` varchar(36) DEFAULT NULL,
  `fi_group` char(1) NOT NULL COMMENT 'To allow the user to input the one character financial institution group',
  `account_operator` varchar(36) DEFAULT NULL,
  `verified_by` varchar(36) DEFAULT NULL,
  `verified_date` timestamp NULL DEFAULT NULL,
  `rtgs_member_code` varchar(11) NOT NULL COMMENT 'To allow the user to input RTGS Member Code.',
  PRIMARY KEY (`id`),
  UNIQUE KEY `member_code` (`member_code`),
  UNIQUE KEY `member_UN` (`fi_code`),
  KEY `fk_member_modified_by_idx` (`modified_by`),
  KEY `fk_member_approved_by_idx` (`approved_by`),
  KEY `fk_member_tax_profile_idx` (`tax_profile_id`),
  KEY `fk_member_member_type_idx` (`member_type`),
  KEY `fk_member_member_status_idx` (`member_status`),
  KEY `fk_member_facility_eligibility_idx` (`facility_eligibility_id`),
  KEY `fk_member_billing_profile_idx` (`billing_profile_id`),
  CONSTRAINT `fk_member_approved_by` FOREIGN KEY (`approved_by`) REFERENCES `user` (`id`),
  CONSTRAINT `fk_member_billing_profile` FOREIGN KEY (`billing_profile_id`) REFERENCES `billing_profile` (`id`),
  CONSTRAINT `fk_member_facility_eligibility` FOREIGN KEY (`facility_eligibility_id`) REFERENCES `facility_eligibility` (`id`),
  CONSTRAINT `fk_member_member_status` FOREIGN KEY (`member_status`) REFERENCES `member_status` (`id`),
  CONSTRAINT `fk_member_member_type` FOREIGN KEY (`member_type`) REFERENCES `member_type` (`id`),
  CONSTRAINT `fk_member_modified_by` FOREIGN KEY (`modified_by`) REFERENCES `user` (`id`),
  CONSTRAINT `fk_member_tax_profile` FOREIGN KEY (`tax_profile_id`) REFERENCES `tax_profile` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='member_screen_member_This table is used to save the members of sss';


CREATE TABLE `tax_scheme` (
  `id` varchar(36) NOT NULL COMMENT 'PRIMARY KEY',
  `tax_scheme_id` varchar(34) NOT NULL COMMENT 'Tax scheme id',
  `description` varchar(35) NOT NULL COMMENT 'Tax scheme description',
  `tax_currency` varchar(3) NOT NULL COMMENT 'Tax currency',
  `lock` tinyint DEFAULT '0' COMMENT 'indicator whether to lock transaction type record to prevent deletion from user end',
  `action` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'Action of last request',
  `status` varchar(30) NOT NULL COMMENT 'Record status',
  `modified_by` varchar(36) NOT NULL COMMENT 'Last modified User ID',
  `modified_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Last modified timestamp',
  `approved_by` varchar(36) NOT NULL COMMENT 'Last approved user ID',
  `approved_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Last approved timestamp',
  `created_date` timestamp NOT NULL COMMENT 'Created date of the record',
  `effective_date` timestamp NULL DEFAULT NULL COMMENT 'Activation date of the record',
  `approval_remark` varchar(140) DEFAULT NULL COMMENT 'Last approver remark',
  `workflow_status_id` int DEFAULT NULL COMMENT 'Approval flow ID',
  PRIMARY KEY (`id`),
  UNIQUE KEY `tax_scheme_id_UNIQUE` (`tax_scheme_id`),
  KEY `fk_tax_scheme_modified_by_idx` (`modified_by`),
  KEY `fk_tax_scheme_approved_by_idx` (`approved_by`),
  CONSTRAINT `fk_tax_scheme_approved_by` FOREIGN KEY (`approved_by`) REFERENCES `user` (`id`),
  CONSTRAINT `fk_tax_scheme_modified_by` FOREIGN KEY (`modified_by`) REFERENCES `user` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='biz-param_screen_tax-scheme_This table is used to save tax scheme related information';


CREATE TABLE `securities_coupon_schedule` (
  `id` int NOT NULL AUTO_INCREMENT,
  `securities_code` varchar(12) NOT NULL,
  `coupon_date` int NOT NULL,
  `coupon_rate` decimal(13,10) DEFAULT NULL,
  `diary_entry_id` varchar(40) DEFAULT NULL,
  `compounded_rate` decimal(13,10) DEFAULT NULL COMMENT 'To store compounded rate from FRN calculation',
  PRIMARY KEY (`id`),
  KEY `fk_coupon_schedule_coupon_idx` (`securities_code`),
  CONSTRAINT `fk_coupon_schedule_coupon` FOREIGN KEY (`securities_code`) REFERENCES `securities_coupon` (`securities_code`)
) ENGINE=InnoDB AUTO_INCREMENT=60 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='ca_screen_securities-coupon_This table is store maintenance info of securities coupon schedules';
	